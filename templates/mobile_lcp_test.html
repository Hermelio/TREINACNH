<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile LCP Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: sans-serif; background: #000; color: #fff; }
        .hero { position: relative; width: 100%; height: 100vh; overflow: hidden; }
        .hero img { position: absolute; width: 100%; height: 100%; object-fit: contain; }
        .metrics { position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.9); padding: 10px; border-radius: 8px; font-size: 11px; z-index: 9999; max-width: 200px; }
        .metrics h3 { margin-bottom: 8px; color: #22c55e; font-size: 13px; }
        .metrics p { margin: 3px 0; line-height: 1.4; }
        .good { color: #22c55e; }
        .warning { color: #fbbf24; }
        .bad { color: #ef4444; }
    </style>
</head>
<body>
    <div class="metrics">
        <h3>ðŸ“± Mobile LCP</h3>
        <p>LCP: <span id="lcp">-</span></p>
        <p>Element: <span id="elem">-</span></p>
        <p>Image: <span id="img">-</span></p>
        <p>Size: <span id="size">-</span></p>
        <p>TTFB: <span id="ttfb">-</span></p>
        <p>FCP: <span id="fcp">-</span></p>
    </div>
    
    <div class="hero">
        <picture>
            <source type="image/avif" 
                    srcset="/static/images/hero/logohome3-640w.avif 640w,
                            /static/images/hero/logohome3-960w.avif 960w"
                    sizes="(max-width: 640px) 640px, 960px">
            <source type="image/webp" 
                    srcset="/static/images/hero/logohome3-640w.webp 640w,
                            /static/images/hero/logohome3-960w.webp 960w"
                    sizes="(max-width: 640px) 640px, 960px">
            <img src="/static/images/hero/logohome3-640w.png" 
                 srcset="/static/images/hero/logohome3-640w.png 640w,
                         /static/images/hero/logohome3-960w.png 960w"
                 sizes="(max-width: 640px) 640px, 960px"
                 alt="Hero"
                 width="640"
                 height="427"
                 fetchpriority="high"
                 loading="eager">
        </picture>
    </div>
    
    <script>
        const observer = new PerformanceObserver((list) => {
            const entries = list.getEntries();
            const lastEntry = entries[entries.length - 1];
            const lcpTime = Math.round(lastEntry.renderTime || lastEntry.loadTime);
            
            document.getElementById('lcp').textContent = lcpTime + 'ms';
            document.getElementById('lcp').className = lcpTime < 2000 ? 'good' : lcpTime < 3000 ? 'warning' : 'bad';
            document.getElementById('elem').textContent = lastEntry.element?.tagName;
            
            if (lastEntry.element?.tagName === 'IMG') {
                const img = lastEntry.element;
                const filename = img.currentSrc.split('/').pop();
                document.getElementById('img').textContent = filename;
                document.getElementById('size').textContent = img.naturalWidth + 'x' + img.naturalHeight;
            }
        });
        
        observer.observe({ type: 'largest-contentful-paint', buffered: true });
        
        window.addEventListener('load', () => {
            const perfData = performance.getEntriesByType('navigation')[0];
            const paintEntries = performance.getEntriesByType('paint');
            
            const ttfb = Math.round(perfData.responseStart);
            document.getElementById('ttfb').textContent = ttfb + 'ms';
            document.getElementById('ttfb').className = ttfb < 200 ? 'good' : ttfb < 500 ? 'warning' : 'bad';
            
            paintEntries.forEach(entry => {
                if (entry.name === 'first-contentful-paint') {
                    const fcp = Math.round(entry.startTime);
                    document.getElementById('fcp').textContent = fcp + 'ms';
                    document.getElementById('fcp').className = fcp < 1000 ? 'good' : fcp < 2000 ? 'warning' : 'bad';
                }
            });
        });
    </script>
</body>
</html>
